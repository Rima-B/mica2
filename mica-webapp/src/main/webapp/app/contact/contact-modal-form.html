<div class="modal-content">

  <form name="form" role="form" novalidate
      class="ng-scope ng-invalid ng-invalid-required ng-dirty ng-valid-minlength" ng-submit="save()">

    <div class="modal-header">
      <button type="button" class="close" aria-hidden="true" ng-click="cancel()">&times;</button>
      <h4 class="modal-title" id="myStudyLabel">
        <span ng-show="isInvestigator" translate>contact.edit.investigator</span>
        <span ng-hide="isInvestigator" translate>contact.edit.contact</span>
      </h4>
    </div>

    <div class="modal-body">

      <tabset>
        <tab ng-repeat="tab in tabs" heading="{{tab.lang}}" active="tab.active" disabled="tab.disabled">

          <div class="form-group" ng-class="{'has-error': form.title.$dirty && form.title.$invalid}">
            <label for="title" translate class="control-label">contact.title</label>
            <input type="text" class="form-control" id="title" name="title" ng-model="contact.title" server-error>
            <p class="input-error" ng-show="form.title.$dirty && form.title.$invalid">
              <span ng-show="form.title.$error.server">{{ errors.title }}</span>
            </p>
          </div>

          <div class="form-group" ng-class="{'has-error': form.firstName.$dirty && form.firstName.$invalid}">
            <label for="firstName" translate class="control-label">contact.firstName</label>
            <input type="text" class="form-control" id="firstName" name="firstName" ng-model="contact.firstName"
                server-error>
            <p class="input-error" ng-show="form.firstName.$dirty && form.firstName.$invalid">
              <span ng-show="form.firstName.$error.server">{{ errors.firstName }}</span>
            </p>
          </div>

          <div class="form-group" ng-class="{'has-error': form.lastName.$dirty && form.lastName.$invalid}">
            <label for="lastName" class="control-label">
              <span translate>contact.lastName</span> *
            </label>
            <input type="text" class="form-control" id="lastName" name="lastName" ng-model="contact.lastName"
                server-error required>
            <p class="input-error" ng-show="form.lastName.$dirty && form.lastName.$invalid">
              <span ng-show="form.lastName.$error.server">{{ errors.lastName }}</span>
              <span ng-show="form.lastName.$error.required" translate>required</span>
            </p>
          </div>

          <div class="form-group" ng-class="{'has-error': form.email.$dirty && form.email.$invalid}">
            <label for="email" translate class="control-label">contact.email</label>
            <input type="text" class="form-control" id="email" name="email" ng-model="contact.email" server-error>
            <p class="input-error" ng-show="form.email.$dirty && form.email.$invalid">
              <span ng-show="form.email.$error.server">{{ errors.email }}</span>
            </p>
          </div>

          <div class="form-group" ng-class="{'has-error': form.phone.$dirty && form.phone.$invalid}">
            <label for="phone" translate class="control-label">contact.phone</label>
            <input type="text" class="form-control" id="phone" name="phone" ng-model="contact.phone" server-error>
            <p class="input-error" ng-show="form.phone.$dirty && form.phone.$invalid">
              <span ng-show="form.phone.$error.server">{{ errors.phone }}</span>
            </p>
          </div>

          <div class="checkbox" ng-class="{'has-error': form.dataAccessCommitteeMember.$invalid}">
            <label for="dataAccessCommitteeMember" translate class="control-label">
              contact.dataAccessCommitteeMember
            </label>
            <input type="checkbox" id="dataAccessCommitteeMember" name="dataAccessCommitteeMember"
                ng-model="contact.dataAccessCommitteeMember" server-error>
            <p class="input-error"
                ng-show="form.dataAccessCommitteeMember.$dirty && form.dataAccessCommitteeMember.$invalid">
              <span ng-show="form.dataAccessCommitteeMember.$error.server">{{ errors.dataAccessCommitteeMember }}</span>
            </p>
          </div>


          <fieldset>
            <legend translate>contact.institution</legend>


            <div class="form-group"
                ng-class="{'has-error': form['institution.name-' + lang].$dirty && form['institution.name-' + lang].$invalid}">
              <label for="institution.name-{{lang}}" translate class="control-label">name</label>
              <input ng-repeat="name in contact.institution.name | filter:{lang:lang}" type="text" class="form-control"
                  id="institution.name-{{lang}}" name="institution.name-{{lang}}" ng-model="name.value" server-error>
              <p class="input-error"
                  ng-show="form['institution.name-' + lang].$dirty && form['institution.name-' + lang].$invalid">
                <span
                    ng-show="form['institution.name-' + lang].$error.server">{{ errors['institution.name-' + lang]}}</span>
              </p>
            </div>

            <div class="form-group"
                ng-class="{'has-error': form['institution.department-' + lang].$dirty && form['institution.department-' + lang].$invalid}">
              <label for="institution.department-{{lang}}" translate class="control-label">contact.department</label>
              <input ng-repeat="department in contact.institution.department | filter:{lang:lang}" type="text"
                  class="form-control"
                  id="institution.department-{{lang}}" name="institution.department-{{lang}}"
                  ng-model="department.value" server-error>
              <p class="input-error"
                  ng-show="form['institution.department-' + lang].$dirty && form['institution.department-' + lang].$invalid">
                <span ng-show="form['institution.department-' + lang].$error.server">{{ errors['institution.department-' + lang]}}</span>
              </p>
            </div>

            <div class="form-group"
                ng-class="{'has-error': form['institution.address.street-' + lang].$dirty && form['institution.address.street-' + lang].$invalid}">
              <label for="institution.address.street-{{lang}}" translate
                  class="control-label">address.label</label>
              <input ng-repeat="street in contact.institution.address.street | filter:{lang:lang}" type="text"
                  class="form-control"
                  id="institution.address.street-{{lang}}" name="institution.address.street-{{lang}}"
                  ng-model="street.value" server-error>
              <p class="input-error"
                  ng-show="form['institution.address.street-' + lang].$dirty && form['institution.address.street-' + lang].$invalid">
                <span ng-show="form['institution.address.street-' + lang].$error.server">{{ errors['institution.address.street-' + lang]}}</span>
              </p>
            </div>

            <div class="form-group"
                ng-class="{'has-error': form['institution.address.city-' + lang].$dirty && form['institution.address.city-' + lang].$invalid}">
              <label for="institution.address.city-{{lang}}" translate
                  class="control-label">address.city</label>
              <input ng-repeat="city in contact.institution.address.city | filter:{lang:lang}" type="text"
                  class="form-control"
                  id="institution.address.city-{{lang}}" name="institution.address.city-{{lang}}"
                  ng-model="city.value" server-error>
              <p class="input-error"
                  ng-show="form['institution.address.city-' + lang].$dirty && form['institution.address.city-' + lang].$invalid">
                <span ng-show="form['institution.address.city-' + lang].$error.server">{{ errors['institution.address.city-' + lang]}}</span>
              </p>
            </div>

            <div class="form-group"
                ng-class="{'has-error': form['institution.address.zip'].$dirty && form['institution.address.zip'].$invalid}">
              <label for="institution.address.zip" translate class="control-label">address.zip</label>
              <input type="text" class="form-control" id="institution.address.zip" name="institution.address.zip"
                  ng-model="contact.institution.address.zip" server-error>
              <p class="input-error"
                  ng-show="form['institution.address.zip'].$dirty && form['institution.address.zip'].$invalid">
                <span
                    ng-show="form['institution.address.zip'].$error.server">{{ errors['institution.address.zip'] }}</span>
              </p>
            </div>

            <div class="form-group"
                ng-class="{'has-error': form['institution.address.state'].$dirty && form['institution.address.state'].$invalid}">
              <label for="institution.address.state" translate class="control-label">address.state</label>
              <input type="text" class="form-control" id="institution.address.state" name="institution.address.state"
                  ng-model="contact.institution.address.state" server-error>
              <p class="input-error"
                  ng-show="form['institution.address.state'].$dirty && form['institution.address.state'].$invalid">
                <span ng-show="form['institution.address.state'].$error.server">{{ errors['institution.address.state'] }}</span>
              </p>
            </div>

            <div class="form-group"
                ng-class="{'has-error': form['institution.address.country.iso'].$dirty && form['institution.address.country.iso'].$invalid}">
              <label for="institution.address.country.iso" translate class="control-label">address.country</label>
              <input type="text" class="form-control" id="institution.address.country.iso"
                  name="institution.address.country.iso"
                  ng-model="contact.institution.address.country.iso" server-error>
              <p class="input-error"
                  ng-show="form['institution.address.country.iso'].$dirty && form['institution.address.country.iso'].$invalid">
                <span ng-show="form['institution.address.country.iso'].$error.server">{{ errors['institution.address.country.iso'] }}</span>
              </p>
            </div>


          </fieldset>

        </tab>
      </tabset>

    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-default" ng-click="cancel()">
        <span class="glyphicon glyphicon-ban-circle"></span> <span translate>cancel</span>
      </button>
      <button type="submit" ng-disabled="form.$invalid" class="btn btn-primary">
        <span class="glyphicon glyphicon-save"></span> <span translate>save</span>
      </button>
    </div>

  </form>

</div>