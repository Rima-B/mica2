<!--
  ~ Copyright (c) 2014 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>
  <h2>
    <ol class="mica-breadcrumb">
      <li><a href="/#/{{type}}">{{type + 's' | translate}}</a></li>
      <li class="active">{{dataset.id}}</li>
    </ol>
  </h2>
  <div class="tabs-menu tabs-left">
    <ul class="nav nav-tabs">
      <li class="active"><a href="#/{{type}}/{{dataset.id}}" title="{{'view' | translate}}"><i
        class="fa fa-eye"></i></a>
      </li>
      <li><a href="#/{{type}}/{{dataset.id}}/revisions" title="{{'revisions' | translate}}"><i
        class="fa fa-list-ol"></i></a>
      </li>
      <li><a href="#/{{type}}/{{dataset.id}}/files" title="{{'files' | translate}}"><i class="fa fa-file"></i></a>
      </li>
    </ul>
  </div>
  <div class="clearfix">
    <h3 class="pull-left no-margin-top" translate>view</h3>
    <div class="pull-right">
      <a ng-href="#/{{type}}/{{dataset.id}}/edit" class="btn btn-primary"
        ng-if="hasRole(['mica-administrator','mica-reviewer','mica-editor']) && dataset['obiba.mica.EntityStateDto.datasetState'].revisionStatus === 'DRAFT'"
        ng-disabled="hasRole(['mica-editor']) && dataset['obiba.mica.EntityStateDto.datasetState'].revisionStatus !== 'DRAFT'">
        <i class="fa fa-pencil-square-o"></i> <span translate>edit</span>
      </a>
      <status-buttons class="inline"
        state="dataset['obiba.mica.EntityStateDto.datasetState']"
        on-publish="publish(true)"
        on-un-publish="publish(false)"
        can-publish="hasRole(['mica-administrator','mica-reviewer'])"
        on-delete="delete()"
        can-delete="hasRole(['mica-administrator','mica-reviewer'])"
        can-edit="hasRole(['mica-administrator','mica-reviewer','mica-editor'])"
        to-draft="toStatus('DRAFT')"
        to-under-review="toStatus('UNDER_REVIEW')"
        to-deleted="toStatus('DELETED')">
      </status-buttons>
    </div>
  </div>
  <p>
    <small class="help-block inline">{{'global.lastUpdate' | translate}}: {{dataset.timestamps.lastUpdate |
      amDateFormat : 'lll'}}
    </small>
    <publish-status class="inline" state="dataset['obiba.mica.EntityStateDto.datasetState']"></publish-status>
  </p>
  <div ng-include="'app/dataset/views/' + type + '-view-details.html'"></div>
</div>
