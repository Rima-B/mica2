<!--
  ~ Copyright (c) 2014 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>

  <h2 translate>harmonized-dataset</h2>

  <div class="btn-group pull-right">
    <a ng-href="#/harmonized-dataset/{{dataset.id}}/edit" class="btn btn-primary">
      <i class="fa fa-pencil-square-o"></i> <span translate>edit</span>
    </a>
    <a ng-click="index()" class="btn btn-primary">
      <i class="fa fa-refresh"></i>
      <span translate>dataset.index</span>
    </a>
    <publish-switch status="dataset.published" publish="publish()" unPublish="unPublish()"></publish-switch>
  </div>

  <tabset>
    <tab ng-repeat="tab in tabs" heading="{{'language.' + tab.lang | translate}}" active="tab.active"
        disabled="tab.disabled">

      <div class="table-responsive">

        <h3 translate>dataset.general-info</h3>
        <table class="table table-striped">
          <tbody>
          <tr>
            <td translate>dataset.name</td>
            <td>
              <localized value="dataset.name" lang="tab.lang"></localized>
            </td>
          </tr>
          <tr>
            <td translate>dataset.description</td>
            <td>
              <localized value="dataset.description" lang="tab.lang"></localized>
            </td>
          </tr>
          <tr>
            <td translate>dataset.entity-type</td>
            <td>{{dataset.entityType}}</td>
          </tr>
          </tbody>
        </table>

        <h3 translate ng-show="dataset['obiba.mica.HarmonizedDatasetDto.type']">dataset.data-schema</h3>
        <table class="table table-striped">
          <tbody>
          <tr>
            <td translate>dataset.project</td>
            <td>
              <a ng-href="{{opal + '/ui/index.html#!project;name=' + datasetProject}}" target="_blank">{{datasetProject}}</a>
            </td>
          </tr>
          <tr>
            <td translate>dataset.table</td>
            <td>
              <a ng-href="{{opal + '/ui/index.html#!project;name=' + datasetProject + ';tab=TABLES;path=' + datasetProject + '.' + datasetTable}}"
                  target="_blank">{{datasetTable}}</a>
            </td>
          </tr>
          </tbody>
        </table>


        <h3 translate ng-show="dataset['obiba.mica.HarmonizedDatasetDto.type']">dataset.study-tables</h3>
        <table class="table table-striped" ng-show="dataset['obiba.mica.HarmonizedDatasetDto.type']">
          <thead>
          <tr>
            <th translate>study.label</th>
            <th translate>dataset.project</th>
            <th translate>dataset.table</th>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat="studyTable in dataset['obiba.mica.HarmonizedDatasetDto.type'].studyTables">
            <td>
              <a ng-href="#/study/{{studyTable.studyId}}">
                {{studyTable.studyId}}
              </a>
            </td>
            <td>
              {{studyTable.project}}
            </td>
            <td>
              {{studyTable.table}}
            </td>
          </tr>
          </tbody>
        </table>

      </div>

    </tab>
  </tabset>


</div>
