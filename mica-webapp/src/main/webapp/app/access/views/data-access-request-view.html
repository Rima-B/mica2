<!--
  ~ Copyright (c) 2015 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>
  <h2>
    <ol class="mica-breadcrumb">
      <li><a href="#/data-access-requests" translate>data-access-requests</a></li>
      <li class="active">{{dataAccessRequest.title}}</li>
    </ol>
  </h2>

  <obiba-alert id="DataAccessRequestViewController"></obiba-alert>

  <div class="row">
    <div class="col-md-6">
      <table class="table table-striped">
        <tbody>
        <tr>
          <td translate>data-access-request.title</td>
          <td>{{dataAccessRequest.title}}</td>
        </tr>
        <tr>
          <td translate>data-access-request.applicant</td>
          <td>{{dataAccessRequest.applicant}}</td>
        </tr>
        <tr>
          <td translate>data-access-request.status</td>
          <td>{{dataAccessRequest.status}}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <attachment-list files="dataAccessRequest.attachments" href-builder="getDownloadHref(attachments, id)"></attachment-list>

  <a target="_self" ng-href="/ws/data-access-request/{{dataAccessRequest.id}}/_pdf" class="btn btn-default">
    <i class="glyphicon glyphicon-download-alt"></i> <span translate>download</span>
  </a>
  <a ng-href="#/data-access-request/{{dataAccessRequest.id}}/edit"
      ng-if="actions.canEdit(dataAccessRequest)"
      class="btn btn-primary">
    <i class="fa fa-pencil-square-o"></i> <span translate>edit</span>
  </a>
  <a ng-click="delete()"
      ng-if="actions.canDelete(dataAccessRequest)"
      class="btn btn-danger" title="{{'delete' | translate}}">
    <i class="fa fa-trash-o"></i>
  </a>

  <a
    ng-click="submit()"
    ng-if="actions.canEdit(dataAccessRequest) && nextStatus.canSubmit(dataAccessRequest)"
    class="btn btn-info">
    <i class="fa fa-check"></i> <span translate>submit</span>
  </a>
  <a
    ng-click="reopen()"
    ng-if="actions.canEdit(dataAccessRequest) && nextStatus.canReopen(dataAccessRequest)"
    class="btn btn-info">
    <i class="fa fa-check"></i> <span translate>reopen</span>
  </a>
  <a
    ng-click="review()"
    ng-if="actions.canEdit(dataAccessRequest) && nextStatus.canReview(dataAccessRequest)"
    class="btn btn-info">
    <i class="fa fa-check"></i> <span translate>review</span>
  </a>
  <a
    ng-click="approve()"
    ng-if="actions.canEdit(dataAccessRequest) && nextStatus.canApprove(dataAccessRequest)"
    class="btn btn-info">
    <i class="fa fa-check"></i> <span translate>approve</span>
  </a>
  <a
    ng-click="reject()"
    ng-if="actions.canEdit(dataAccessRequest) && nextStatus.canReject(dataAccessRequest)"
    class="btn btn-info">
    <i class="fa fa-check"></i> <span translate>reject</span>
  </a>

  <tabset class="voffset5">
    <div class="pull-right">
    </div>
    <tab heading="{{'data-access-request.form' | translate}}">
      <form id="request-form" name="forms.requestForm">
        <div sf-model="form.model" sf-form="form.definition" sf-schema="form.schema"></div>
      </form>
    </tab>
    <tab heading="{{'data-access-request.comments' | translate}}">
    </tab>
    <tab heading="{{'data-access-request.history' | translate}}">
    </tab>
  </tabset>

</div>
